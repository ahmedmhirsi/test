{% extends 'marketing/base.html.twig' %}

{% block title %}{{ lead.contactName }}{% endblock %}

{% block body %}
<div class="max-w-3xl mx-auto space-y-6 fade-in">
    <div class="mb-6">
        <a href="{{ path('app_marketing_leads') }}" class="back-link">
            <span class="material-symbols-outlined text-[18px]">arrow_back</span>
            Back to Leads
        </a>
    </div>

    <!-- Lead Header -->
    <div class="section-card p-6 rise-in">
        <div class="flex flex-col md:flex-row gap-6 items-start md:items-center justify-between">
            <div class="flex items-center gap-5">
                <div class="size-16 rounded-xl bg-primary/10 flex items-center justify-center">
                    <span class="material-symbols-outlined text-primary text-3xl">person</span>
                </div>
                <div>
                    <h1 class="text-2xl font-display font-black text-navy dark:text-white tracking-tight">{{ lead.contactName }}</h1>
                    <p class="text-gray-500 dark:text-gray-400 text-sm font-semibold">{{ lead.position }} at {{ lead.companyName }}</p>
                    <span class="inline-block mt-2 px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest
                        {% if lead.status == 'converted' %}bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400
                        {% elseif lead.status == 'new' %}bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400
                        {% elseif lead.status == 'contacted' %}bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400
                        {% elseif lead.status == 'qualified' %}bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400
                        {% else %}bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400{% endif %}">
                        {{ lead.statusLabel }}
                    </span>
                </div>
            </div>
            {% if lead.status != 'converted' and lead.status != 'lost' %}
            <form method="post" action="{{ path('app_marketing_lead_update_status', {id: lead.id}) }}" class="flex gap-2">
                <select name="status" class="rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-[#0f1223] px-4 py-2 text-sm text-navy dark:text-white">
                    <option value="">Update Status...</option>
                    <option value="contacted">Mark Contacted</option>
                    <option value="qualified">Mark Qualified</option>
                    <option value="converted">Mark Converted</option>
                    <option value="lost">Mark Lost</option>
                </select>
                <button type="submit" class="btn-primary h-10 px-4">
                    Update
                </button>
            </form>
            {% endif %}
            <a href="{{ path('app_marketing_lead_edit', {id: lead.id}) }}" class="btn-secondary h-10 px-4">
                <span class="material-symbols-outlined text-[16px]">edit</span>
                Edit
            </a>
        </div>
    </div>

    <!-- Contact Info -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div class="section-card p-6">
            <h3 class="section-title mb-4">Contact Information</h3>
            <div class="space-y-4">
                <div class="flex items-center gap-3">
                    <div class="p-2 bg-primary/10 rounded-lg">
                        <span class="material-symbols-outlined text-primary">mail</span>
                    </div>
                    <div>
                        <p class="text-[10px] font-black text-gray-500 uppercase tracking-widest">Email</p>
                        <a href="mailto:{{ lead.email }}" class="text-sm text-navy dark:text-white hover:text-primary">{{ lead.email }}</a>
                    </div>
                </div>
                {% if lead.phone %}
                <div class="flex items-center gap-3">
                    <div class="p-2 bg-green-50 dark:bg-green-900/20 rounded-lg">
                        <span class="material-symbols-outlined text-green-600">phone</span>
                    </div>
                    <div>
                        <p class="text-[10px] font-black text-gray-500 uppercase tracking-widest">Phone</p>
                        <a href="tel:{{ lead.phone }}" class="text-sm text-navy dark:text-white hover:text-primary">{{ lead.phone }}</a>
                    </div>
                </div>
                {% endif %}
                <div class="flex items-center gap-3">
                    <div class="p-2 bg-purple-50 dark:bg-purple-900/20 rounded-lg">
                        <span class="material-symbols-outlined text-purple-600">business</span>
                    </div>
                    <div>
                        <p class="text-[10px] font-black text-gray-500 uppercase tracking-widest">Company</p>
                        <p class="text-sm text-navy dark:text-white">{{ lead.companyName }}</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="section-card p-6">
            <h3 class="section-title mb-4">Acquisition Details</h3>
            <div class="space-y-4">
                <div class="flex items-center gap-3">
                    <div class="p-2 bg-gold/10 rounded-lg">
                        <span class="material-symbols-outlined text-gold">campaign</span>
                    </div>
                    <div>
                        <p class="text-[10px] font-black text-gray-500 uppercase tracking-widest">Campaign</p>
                        <p class="text-sm text-navy dark:text-white">{{ lead.campaign.name }}</p>
                    </div>
                </div>
                <div class="flex items-center gap-3">
                    <div class="p-2 bg-primary/10 rounded-lg">
                        <span class="material-symbols-outlined text-primary">{{ lead.channel.icon }}</span>
                    </div>
                    <div>
                        <p class="text-[10px] font-black text-gray-500 uppercase tracking-widest">Channel</p>
                        <p class="text-sm text-navy dark:text-white">{{ lead.channel.name }}</p>
                    </div>
                </div>
                <div class="flex items-center gap-3">
                    <div class="p-2 bg-gray-100 dark:bg-gray-800 rounded-lg">
                        <span class="material-symbols-outlined text-gray-600">schedule</span>
                    </div>
                    <div>
                        <p class="text-[10px] font-black text-gray-500 uppercase tracking-widest">Added On</p>
                        <p class="text-sm text-navy dark:text-white">{{ lead.createdAt|date('F d, Y \\a\\t H:i') }}</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Quick Actions -->
    <div class="bg-gold/10 rounded-xl border border-dashed border-gold/30 p-4 rise-in">
        <h3 class="text-[11px] font-black text-navy dark:text-white mb-3 uppercase tracking-widest">Quick Actions</h3>
        <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
            <a href="{{ path('app_marketing_email_compose', {id: lead.id}) }}" class="flex flex-col items-center justify-center p-3 bg-white dark:bg-[#1a1d2d] rounded-lg shadow-sm hover:shadow-md transition-shadow card-hover">
                <span class="material-symbols-outlined text-gold mb-1">forward_to_inbox</span>
                <span class="text-[10px] font-black text-gray-700 dark:text-gray-300 uppercase tracking-tighter">Promo Email</span>
            </a>
            {% if lead.phone %}
            <a href="tel:{{ lead.phone }}" class="flex flex-col items-center justify-center p-3 bg-white dark:bg-[#1a1d2d] rounded-lg shadow-sm hover:shadow-md transition-shadow card-hover">
                <span class="material-symbols-outlined text-gold mb-1">call</span>
                <span class="text-[10px] font-black text-gray-700 dark:text-gray-300 uppercase tracking-tighter">Call</span>
            </a>
            {% endif %}
            <button class="flex flex-col items-center justify-center p-3 bg-white dark:bg-[#1a1d2d] rounded-lg shadow-sm hover:shadow-md transition-shadow card-hover">
                <span class="material-symbols-outlined text-gold mb-1">note_add</span>
                <span class="text-[10px] font-black text-gray-700 dark:text-gray-300 uppercase tracking-tighter">Add Note</span>
            </button>
            <button class="flex flex-col items-center justify-center p-3 bg-white dark:bg-[#1a1d2d] rounded-lg shadow-sm hover:shadow-md transition-shadow card-hover">
                <span class="material-symbols-outlined text-gold mb-1">event</span>
                <span class="text-[10px] font-black text-gray-700 dark:text-gray-300 uppercase tracking-tighter">Schedule</span>
            </button>
        </div>
    </div>
</div>
{% endblock %}
