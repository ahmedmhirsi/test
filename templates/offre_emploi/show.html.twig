{% extends 'back_office/base.html.twig' %}

{% block title %}Détails Offre — {{ offre.poste }}{% endblock %}

{% block breadcrumb %}
    <span class="text-[#9ca3af] material-symbols-outlined text-[16px]">chevron_right</span>
    <a href="{{ path('app_offre_emploi_index') }}" class="text-[#A79E9C] hover:text-primary transition-colors font-medium">Offres</a>
    <span class="text-[#9ca3af] material-symbols-outlined text-[16px]">chevron_right</span>
    <span class="text-primary font-semibold">{{ offre.poste }}</span>
{% endblock %}

{% block content %}
<div data-controller="page-transition">
    <div class="max-w-4xl mx-auto">
        {# ── Back + Title ── #}
        <div class="mb-6 flex items-center justify-between">
            <a href="{{ path('app_offre_emploi_index') }}" class="text-[#A79E9C] hover:text-primary flex items-center gap-2 text-sm font-medium transition-colors">
                <span class="material-symbols-outlined text-[18px]">arrow_back</span>
                Retour aux offres
            </a>
            <div class="flex gap-2">
                <a href="{{ path('app_offre_emploi_edit', {id: offre.id}) }}" class="btn-primary-animated flex items-center gap-2 px-5 py-2.5 text-sm">
                    <span class="material-symbols-outlined text-[18px]">edit</span>
                    Modifier
                </a>
            </div>
        </div>

        {# ── Main Card ── #}
        <div class="section-card animate-card">
            {# Header with gradient #}
            <div class="p-6 pb-0 bg-gradient-to-br from-primary/5 via-transparent to-electric/5 rounded-t-xl">
                <div class="flex flex-col md:flex-row md:items-start justify-between gap-4 mb-4">
                    <div>
                        <h1 class="page-title text-3xl font-black text-[#D3C3B9] dark:text-white tracking-tight mb-2">{{ offre.poste }}</h1>
                        <div class="flex flex-wrap items-center gap-3 text-sm text-[#A79E9C] dark:text-[#9ca3af]">
                            <span class="flex items-center gap-1">
                                <span class="material-symbols-outlined text-[16px]">work</span>
                                {{ offre.typeContrat }}
                            </span>
                            {% if offre.datePublication %}
                            <span class="flex items-center gap-1">
                                <span class="material-symbols-outlined text-[16px]">calendar_today</span>
                                {{ offre.datePublication|date('d M Y') }}
                            </span>
                            {% endif %}
                        </div>
                    </div>
                    <span class="status-badge text-xs
                        {% if offre.statut == 'Active' %}bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400
                        {% elseif offre.statut == 'Closed' %}bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400
                        {% else %}bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-400{% endif %}">
                        <span class="size-1.5 rounded-full 
                            {% if offre.statut == 'Active' %}bg-green-500{% elseif offre.statut == 'Closed' %}bg-red-500{% else %}bg-gray-400{% endif %}"></span>
                        {{ offre.statut }}
                    </span>
                </div>
            </div>

            {# Salary Badge #}
            <div class="px-6 py-4 border-b border-[#e5e7eb] dark:border-[#1f2128]">
                <div class="inline-flex items-center gap-2 bg-emerald-50 dark:bg-emerald-900/10 text-emerald-700 dark:text-emerald-400 px-4 py-2.5 rounded-xl border border-emerald-100 dark:border-emerald-800/30">
                    <span class="material-symbols-outlined text-[20px]">payments</span>
                    <span class="text-lg font-black">{{ offre.salaireMin|number_format(0) }} — {{ offre.salaireMax|number_format(0) }} €</span>
                </div>
            </div>

            {# Description #}
            <div class="p-6 space-y-6">
                <div>
                    <h2 class="text-sm font-black text-[#D3C3B9] dark:text-white uppercase tracking-wider mb-3 flex items-center gap-2">
                        <span class="material-symbols-outlined text-primary text-[18px]">description</span>
                        Description du poste
                    </h2>
                    <div class="text-sm text-[#A79E9C] dark:text-[#9ca3af] leading-relaxed">
                        {{ offre.description|nl2br }}
                    </div>
                </div>

                {% if offre.competences %}
                <div>
                    <h2 class="text-sm font-black text-[#D3C3B9] dark:text-white uppercase tracking-wider mb-3 flex items-center gap-2">
                        <span class="material-symbols-outlined text-primary text-[18px]">psychology</span>
                        Compétences requises
                    </h2>
                    <div class="flex flex-wrap gap-2">
                        {% for competence in offre.competences|split(',') %}
                            <span class="inline-flex items-center px-3 py-1.5 rounded-full text-xs font-bold bg-primary/10 text-primary border border-primary/20 hover:bg-primary/20 transition-colors">
                                {{ competence|trim }}
                            </span>
                        {% endfor %}
                    </div>
                </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock %}
