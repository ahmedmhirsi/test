{% extends 'base.html.twig' %}

{% block title %}Nouveau Sondage{% endblock %}

{% block body %}
<main class="flex-1 overflow-y-auto bg-background-light dark:bg-background-dark p-4 md:p-8">
    <div class="max-w-4xl mx-auto">
        
        <div class="bg-white dark:bg-[#1a1d2d] rounded-xl border border-gray-100 dark:border-[#2a2e3f] shadow-sm p-6">
            <h1 class="text-2xl font-display font-black text-navy dark:text-white mb-6">Créer un Sondage</h1>

            <form method="post" id="pollForm">
                <div class="space-y-6">
                    
                    <!-- Question -->
                    <div>
                        <label class="block text-sm font-bold text-navy dark:text-white mb-2">Question du Sondage *</label>
                        <input type="text" name="question" required 
                            class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary bg-white dark:bg-gray-800 text-navy dark:text-white"
                            placeholder="Ex: Quelle est la meilleure date pour notre prochain meeting ?">
                    </div>

                    <!-- Description -->
                    <div>
                        <label class="block text-sm font-bold text-navy dark:text-white mb-2">Description (optionnel)</label>
                        <textarea name="description" rows="3"
                            class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary bg-white dark:bg-gray-800 text-navy dark:text-white"
                            placeholder="Ajoutez des détails supplémentaires..."></textarea>
                    </div>

                    <!-- Options -->
                    <div>
                        <label class="block text-sm font-bold text-navy dark:text-white mb-2">Options de Réponse *</label>
                        <div id="optionsContainer" class="space-y-2">
                            <div class="flex gap-2">
                                <input type="text" name="options[]" required
                                    class="flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary bg-white dark:bg-gray-800 text-navy dark:text-white"
                                    placeholder="Option 1">
                            </div>
                            <div class="flex gap-2">
                                <input type="text" name="options[]" required
                                    class="flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary bg-white dark:bg-gray-800 text-navy dark:text-white"
                                    placeholder="Option 2">
                            </div>
                        </div>
                        <button type="button" id="addOption" class="mt-3 text-primary font-bold text-sm hover:underline flex items-center gap-1">
                            <span class="material-symbols-outlined text-[18px]">add</span>
                            Ajouter une option
                        </button>
                    </div>

                    <!-- Settings -->
                    <div class="grid grid-cols-2 gap-4 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg">
                        <label class="flex items-center gap-2 cursor-pointer">
                            <input type="checkbox" name="allow_multiple" value="1" class="w-4 h-4 text-primary">
                            <span class="text-sm font-semibold text-navy dark:text-white">Choix multiples</span>
                        </label>
                        <label class="flex items-center gap-2 cursor-pointer">
                            <input type="checkbox" name="anonymous" value="1" class="w-4 h-4 text-primary">
                            <span class="text-sm font-semibold text-navy dark:text-white">Vote anonyme</span>
                        </label>
                    </div>

                    <!-- Actions -->
                    <div class="flex gap-3 pt-4">
                        <button type="submit" class="h-11 px-8 rounded-lg bg-gold text-navy text-xs font-black uppercase tracking-widest hover:brightness-110 shadow-lg">
                            Créer le Sondage
                        </button>
                        <a href="{{ path('app_poll_index') }}" class="h-11 px-6 rounded-lg border-2 border-gray-200 dark:border-gray-600 text-navy dark:text-white text-xs font-black uppercase tracking-widest hover:bg-gray-50 dark:hover:bg-gray-800 flex items-center">
                            Annuler
                        </a>
                    </div>

                </div>
            </form>
        </div>

    </div>
</main>

<script>
document.getElementById('addOption').addEventListener('click', function() {
    const container = document.getElementById('optionsContainer');
    const optionCount = container.children.length + 1;
    
    const div = document.createElement('div');
    div.className = 'flex gap-2';
    div.innerHTML = `
        <input type="text" name="options[]"
            class="flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary bg-white dark:bg-gray-800 text-navy dark:text-white"
            placeholder="Option ${optionCount}">
        <button type="button" onclick="this.parentElement.remove()" class="px-3 py-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg">
            <span class="material-symbols-outlined text-[20px]">delete</span>
        </button>
    `;
    
    container.appendChild(div);
});
</script>
{% endblock %}
